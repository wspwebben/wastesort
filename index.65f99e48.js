function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},s=r.parcelRequire2d71;null==s&&((s=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){o[e]=t},r.parcelRequire2d71=s),s.register("bXuNP",(function(t,r){var n,o;e(t.exports,"register",(()=>n),(e=>n=e)),e(t.exports,"resolve",(()=>o),(e=>o=e));var s={};n=function(e){for(var t=Object.keys(e),r=0;r<t.length;r++)s[t[r]]=e[t[r]]},o=function(e){var t=s[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),s("bXuNP").register(JSON.parse('{"a0H7v":"index.65f99e48.js","1jfi8":"blue.73ec7683.png","4ZRlr":"red.2e247d05.png","700GW":"green.8302779a.png","h8OWe":"yellow.7cd4362b.png","5rAac":"blue.80f33f87.png","hDU98":"red.1feb1b01.png","1iQXm":"green.b9c6acd6.png","6XsSE":"yellow.5a5dfba9.png"}'));const l="plastic",a="glass",i="paper",c="organic",u=[{type:l,label:"Пластик",color:"red"},{type:a,label:"Стекло",color:"blue"},{type:i,label:"Бумага",color:"yellow"},{type:c,label:"Органика",color:"green"}],d=[{type:l,label:"Пластиковая бутылка"},{type:a,label:"Стеклянная бутылка"},{type:i,label:"Салфетка"},{type:c,label:"Шкурка банана"},{type:c,label:"Огрызок яблока"}];var g;s.register("kPq84",(function(t,r){var n;e(t.exports,"getBundleURL",(()=>n),(e=>n=e));var o={};function s(e){return(""+e).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}n=function(e){var t=o[e];return t||(t=function(){try{throw new Error}catch(t){var e=(""+t.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g);if(e)return s(e[2])}return"/"}(),o[e]=t),t}})),g=s("kPq84").getBundleURL("a0H7v")+s("bXuNP").resolve("1jfi8");var p;p=s("kPq84").getBundleURL("a0H7v")+s("bXuNP").resolve("4ZRlr");var b;b=s("kPq84").getBundleURL("a0H7v")+s("bXuNP").resolve("700GW");var y;y=s("kPq84").getBundleURL("a0H7v")+s("bXuNP").resolve("h8OWe");const _={blue:t(g),red:t(p),green:t(b),yellow:t(y)};var f;f=s("kPq84").getBundleURL("a0H7v")+s("bXuNP").resolve("5rAac");var m;m=s("kPq84").getBundleURL("a0H7v")+s("bXuNP").resolve("hDU98");var h;h=s("kPq84").getBundleURL("a0H7v")+s("bXuNP").resolve("1iQXm");var v;v=s("kPq84").getBundleURL("a0H7v")+s("bXuNP").resolve("6XsSE");const q={blue:t(f),red:t(m),green:t(h),yellow:t(v)},S=document.querySelector(".js-boxes"),j=S.querySelector(".js-boxes__template"),w=e=>{const t=j.content.cloneNode(!0),r=t.querySelector(".js-boxes__button"),n=t.querySelector(".js-boxes__label"),o=t.querySelector(".js-boxes__top"),s=t.querySelector(".js-boxes__body");return r.dataset.type=e.type,r.classList.add(`is-${e.color}`),n.textContent=e.label,o.src=q[e.color],s.src=_[e.color],t},H=e=>{var t;(()=>{const e=u.map(w);S.replaceChildren(...e)})(),S.addEventListener("click",(t=e,({target:e})=>{const r=e.closest(".js-boxes__button");if(!r)return;const n=r.querySelector(".js-boxes__dump"),{type:o}=r.dataset;t({type:o,moveToDump:e=>{n.appendChild(e),r.classList.add("is-dumping")},removeFromDump:e=>{r.classList.remove("is-dumping"),n.removeChild(e)}})}))},R=e=>{S.classList.toggle("is-disabled",!e)},x=e=>{let t,r=e.length;for(;0!=r;)t=Math.floor(Math.random()*r),r--,[e[r],e[t]]=[e[t],e[r]];return e},L=e=>{const t=(r=0,n=e.length-1,Math.floor(Math.random()*(n-r+1)+r));var r,n;const[o]=e.splice(t,1);return o},E=document.querySelector(".js-item"),P=E.querySelector(".js-item__template");let A=x([...d]),k=L(A);const F=()=>{k=L(A),A.length<=2&&(A.push(...d),x(A));const e=(e=>{const t=P.content.cloneNode(!0),r=t.querySelector(".js-item__content");return r.textContent=e.label,r.dataset.type=e.type,t})(k);E.replaceChildren(e)},N=document.querySelector(".js-score"),C=N.querySelector(".js-score__right"),X=N.querySelector(".js-score__wrong"),U=N.querySelectorAll(".js-score__badge");let B={right:0,wrong:0};const $=()=>{B.right+=1,C.textContent=B.right},D=()=>{B.wrong+=1,X.textContent=B.wrong},O=()=>{B={right:0,wrong:0},C.textContent=0,X.textContent=0},M=e=>{U.forEach((t=>t.hidden=!e))},T=document.querySelector(".js-countdown"),W=T.querySelector(".js-countdown__elapsed"),G=T.querySelector(".js-countdown__remaining"),Q=document.querySelector(".js-notification"),V=Q.querySelector(".js-notification__right"),Z=Q.querySelector(".js-notification__wrong"),J=e=>()=>{e.classList.add("is-shown"),e.addEventListener("animationend",(()=>{e.classList.remove("is-shown")}),{once:!0})},z=J(V),I=J(Z),K={getScore:()=>B,increaseRight:$,increaseWrong:D,reset:O,setVisibility:M},Y=document.querySelector(".js-game"),ee=Y.querySelector(".js-game__item"),te=Y.querySelector(".js-game__start"),re=Y.querySelector(".js-game__restart"),ne=()=>{te.hidden=!0,ee.hidden=!1,K.setVisibility(!0),R(!0),F(),(e=>{const t=Math.ceil(W.getTotalLength());return T.classList.remove("is-done"),G.setAttribute("stroke-dasharray",`${t} ${t}`),requestAnimationFrame((()=>{requestAnimationFrame((()=>{G.style.transitionDuration=`${e}s`,G.setAttribute("stroke-dasharray",`0 ${t}`)}))})),new Promise((e=>{G.addEventListener("transitionend",(()=>{G.style.transitionDuration="",T.classList.add("is-done"),e()}),{once:!0})}))})(60).then((()=>{ee.hidden=!0,re.hidden=!1,R(!1)}))},oe=()=>{re.hidden=!0,K.reset(),ne()};H((({type:e,moveToDump:t,removeFromDump:r})=>{const n=E.querySelector(".js-item__content"),o=k;R(!1),o.type===e?(K.increaseRight(),z()):(K.increaseWrong(),I()),(({element:e,trigger:t,cleanup:r})=>new Promise((n=>{const o=e.getBoundingClientRect();t(e);const s=e.getBoundingClientRect();e.addEventListener("transitionend",(()=>{r(e),n()}),{once:!0}),e.style.transformOrigin="top left",e.style.transform=((e,t)=>`\n        translate(${e.left-t.left}px, ${e.top-t.top}px)\n        scale(${e.width/t.width}, ${e.height/t.height})\n    `)(o,s),requestAnimationFrame((()=>{e.style.transition="transform 0.7s ease-out",e.style.transform="none"}))})))({element:n,trigger:t,cleanup:r}).then((()=>{F(),R(!0)}))})),R(!1),te.addEventListener("click",ne),re.addEventListener("click",oe);
//# sourceMappingURL=index.65f99e48.js.map
